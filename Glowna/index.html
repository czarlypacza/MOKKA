<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <title>Strona głowna</title>
</head>

<body>

    <header class="nav-container">
        <input type="checkbox" id="nav-toggle" class="nav-toggle">
        <input type="checkbox" id="search-toggle" class="search-toggle">

        <div class="nav-top">
            <a class="logo" href="index.html" aria-label="Visit the homepage">
                <img src="img/Logo.svg" alt="logo" class="logo-logoMark">
            </a>

            <script>
                function myFunction() {
                    console.log("clicked");
                }

            </script>

            <div class="buttons">
                <button class="button" onclick="myFunction()">
                    <label for="search-toggle" class="search-toggle-label">
                        <img src="img/Search.svg" alt="search" class="nav-icon">
                    </label>
                </button>
                <button class="button" onclick="myFunction()"> <img src="img/Koszyk.svg" alt="koszyk" class="nav-icon">
                </button>
                <button class="button" onclick="myFunction()"> <img src="img/Konto.svg" alt="konto" class="nav-icon">
                </button>
                <button class="button">
                    <img src="img/Tlo.svg" alt="menu" class="nav-icon">
                    <label for="nav-toggle" class="nav-toggle-label">
                        <span></span>
                    </label>
                </button>
            </div>
        </div>

        <nav>
            <div class="nav-title">
                <p>Kategorie</p> <img src="img/Close_square.svg" id="close-nav" class="close-nav" alt="close">
            </div>
            <div class="nav-wrapper">
                <ul>
                    <li class="nav-option-more"><a href="#" >Herbata</a><img src="img/Vector.svg" alt="arrow"></li>
                    <li class="nav-option-more"><a href="#" >Yerba</a><img src="img/Vector.svg" alt="arrow"></li>
                    <li class="nav-option-more"><a href="#" >Kawa</a><img src="img/Vector.svg" alt="arrow"></li>
                    <li class="nav-option-more"><a href="#" >Akcesoria</a><img src="img/Vector.svg" alt="arrow"></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">O nas</a></li>
                    <li><a href="#">Forum</a></li>
                </ul>
            </div>
        </nav>

        <div class="search-bar">
            <div class="search-field">
                <button class="search-button"> <img src="img/Search-icon.svg" alt="search"
                        class="search-image"></button>
                <span></span>
                <input type="text" placeholder="Wyszukaj">
            </div>
            <div id="search-results" class="search-results-noshow">
                <div class="result">
                    <img src="img/Herbatka.png" alt="herbata" class="result-image">
                    <div class="result-text">
                        <h4>13,99 zł</h4>
                        <p>Herbata zielona Hebapol</p>
                    </div>
                </div>

            </div>
        </div>

    </header>

    <main class="body">
        <p>aaaaaaaaaaaaaaaaa</p>

    </main>


    <script>
        document.querySelector('#close-nav').addEventListener('click', function () {
            document.querySelector('.nav-toggle').click();
        });

        document.querySelector('.nav-toggle').addEventListener('click', function () {
            if (this.checked) {
                document.querySelector('.search-toggle').checked = false;
            }
        });

        document.querySelector('.search-toggle').addEventListener('click', function () {
            if (this.checked) {
                document.querySelector('.nav-toggle').checked = false;
            }
        });

        document.querySelector('.search-field>input').addEventListener('input', function () {
            if (this.value.length > 0) {
                console.log(this.value);
                document.querySelector('#search-results').classList.remove('search-results-noshow');
                document.querySelector('#search-results').classList.add('search-results-show');
            } else {
                document.querySelector('#search-results').classList.remove('search-results-show');
                document.querySelector('#search-results').classList.add('search-results-noshow');
            }
        });

        const categories = {
            'Herbata': ['Czarna', 'Biala', 'Zielona', 'Czerwona', 'Oolong', 'Żółta', 'Owocowa'],
            'Yerba': ['Argentyńska', 'Urugwajska', 'Paragwajska','Brazylijska','Owocowa'],
            'Kawa': ['Ziarnista', 'Mielona', 'Rozpuszczalna','Wszystko'],
            'Akcesoria': ['Herbata', 'Yerba', 'Kawa'],
        };

        const extra_categories = [
            'Blog',
            'O nas',
            'Forum',
        ];

        const navItems = document.querySelectorAll('nav ul li.nav-option-more');
        const nav = document.querySelector('nav');
        const ul = document.querySelector('nav ul');

        function nav_function() {
                const category = this.textContent;
                const subcategories = categories[category];
                const ul = this.parentElement;
                ul.innerHTML = '';
                subcategories.forEach(subcategory => {
                    const li = document.createElement('li');
                    li.innerHTML = `<a href="#">${subcategory}</a><img src="img/Vector.svg" alt="arrow">`;
                    ul.appendChild(li);
                });
                setTimeout(() => {
                    nav.style.transform = 'translateX(0)';
                }, 100);
                setTimeout(() => {
                    nav.style.transform = 'translateX(-100%)';
                }, 50);
                setTimeout(() => {
                    nav.style.transform = '';
                }, 200);

                document.querySelector('.nav-title').removeChild(document.querySelector('.nav-title img'));
                document.querySelector('.nav-title').innerHTML = `<p>${category}</p><img src="img/Arrow-back.svg" id="close-nav" class="close-nav" alt="close">`;
                document.querySelector('#close-nav').addEventListener('click', function () {
                    nav.style.transform = '';
                    ul.innerHTML = '';
                    Object.keys(categories).forEach(category => {
                        const li = document.createElement('li');
                        li.classList.add('nav-option-more');
                        li.innerHTML = `<a href="#">${category}</a><img src="img/Vector.svg" alt="arrow">`;
                        li.addEventListener('click', nav_function);
                        ul.appendChild(li);
                    });
                    extra_categories.forEach(category => {
                        const li = document.createElement('li');
                        li.innerHTML = `<a href="#">${category}</a>`;
                        ul.appendChild(li);
                    });
                    document.querySelector('.nav-title').innerHTML = `<p>Kategorie</p><img src="img/Close_square.svg" id="close-nav" class="close-nav" alt="close">`;
                    document.querySelector('#close-nav').addEventListener('click', function () {
                        document.querySelector('.nav-toggle').click();
                    });
                });
            }

            navItems.forEach(item => {
                item.addEventListener('click', nav_function);
            });

            // const back = document.querySelector('#close-nav');
            // back.addEventListener('click', function () {
            //     ul.innerHTML = '';
            //     Object.keys(categories).forEach(category => {
            //         const li = document.createElement('li');
            //         li.classList.add('nav-option-more');
            //         li.innerHTML = `<a href="#">${category}</a><img src="img/Vector.svg" alt="arrow">`;
            //         li.addEventListener('click', nav_function);
            //         ul.appendChild(li);
            //     });
            //     extra_categories.forEach(category => {
            //         const li = document.createElement('li');
            //         li.innerHTML = `<a href="#">${category}</a>`;
            //         ul.appendChild(li);
            //     });
            // });



    </script>
</body>

</html>